{"version":3,"sources":["components/Config.js","components/Helpers.js","components/Header.js","components/Footer.js","components/Rule.js","components/Drag.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["baseUrl","stateInitial","centers","key","title","formats","ratio","from","to","orientations","rules","formatByRatio","Orientation","props","useState","items","setItems","useEffect","itemList","Fragment","map","center","idx","itemClass","current","className","Header","rule","setRule","format","setFormat","setOrientation","centering","setCenter","loading","setLoading","state","_","findKey","imageData","orientation","doUpload","e","data","FormData","append","target","files","axios","post","then","res","setImage","onClick","data-loading","type","name","accept","onChange","Footer","Rule","rulePath","loader","src","swipeDeltaX","swipeDeltaY","Drag","refDrag","useRef","swipeState","setSwipeState","transformOnDrag","x","y","style","transform","Math","abs","data-orientation","ref","nodeName","backgroundImage","base64","onSwipe","onSwipeEnd","currentRule","parseInt","currentFormat","direction","length","detectMouse","detectTouch","preventDefault","stopPropagation","Main","headerState","setHeaderState","footerState","setFooterState","setImageData","lsData","localStorage","getItem","imgData","JSON","parse","imgFormat","setItem","stringify","removeItem","currentCenter","nextCenter","alt","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.910e1a7e.chunk.js","sourcesContent":["\nexport const baseUrl = \t\t'https://www.borisvidosevic.com/composition/';\n\nexport const stateInitial = {\t\"format\": \t\t\"4-3\",\n\t\t\t\t\t\t\t\t\"rule\": \t\t\"r-thirds\",\n\t\t\t\t\t\t\t\t\"center\": \t\t\"c-c\",\n\t\t\t\t\t\t\t\t\"orientation\": \t\"\"\n};\n\nexport const centers = [\t{\tkey: \"t-l\",\n\t\t\t\t\t\t\t\ttitle: \"t l\"},\n\t\t\t\t\t\t\t{\tkey: \"t-c\",\n\t\t\t\t\t\t\t\ttitle: \"t c\"},\n\t\t\t\t\t\t\t{\tkey: \"t-r\",\n\t\t\t\t\t\t\t\ttitle: \"t r\"},\n\t\t\t\t\t\t\t{\tkey: \"c-r\",\n\t\t\t\t\t\t\t\ttitle: \"c r\" },\n\t\t\t\t\t\t\t{\tkey: \"b-r\",\n\t\t\t\t\t\t\t\ttitle: \"b r\"},\n\t\t\t\t\t\t\t{\tkey: \"b-c\",\n\t\t\t\t\t\t\t\ttitle: \"b c\"},\n\t\t\t\t\t\t\t{\tkey: \"b-l\",\n\t\t\t\t\t\t\t\ttitle: \"b l\"},\n\t\t\t\t\t\t\t{\tkey: \"c-l\",\n\t\t\t\t\t\t\t\ttitle: \"c l\"},\n\t\t\t\t\t\t\t{\tkey: \"c-c\",\n\t\t\t\t\t\t\t\ttitle: \"c c\"},\n];\n\nexport const formats = \t[\t{\tkey: \t\"9-16\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 16:9\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.2, to: 0.65}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"2-3\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 3:2\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.66, to: 0.74}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"3-4\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 4:3\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.75, to: 0.79}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"4-5\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 5:4\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.8, to: 0.89}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"1-1\", \n\t\t\t\t\t\t\t\ttitle:\t\"Square 1:1\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.9, to: 1.24}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"5-4\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 5:4\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.25, to: 1.32}\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \t\"4-3\", \n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 4:3\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.33, to: 1.49}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"3-2\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 3:2\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.5, to: 1.75}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"16-9\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 16:9\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.76, to: 3}\n\t\t\t\t\t\t\t}\n];\n\nexport const orientations = [\t{\tkey: \"square\", \n\t\t\t\t\t\t\t\t\ttitle: \"Square\"\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t{\tkey: \"landscape\", \n\t\t\t\t\t\t\t\t\ttitle: \"Landscape\"\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t{\tkey: \"portrait\", \n\t\t\t\t\t\t\t\t\ttitle: \"Portrait\"\n\t\t\t\t\t\t\t\t}\n];\n\nexport const rules = \t[\t{\tkey: \"r-thirds\", \n\t\t\t\t\t\t\t\ttitle: \"Rule Of Thirds\"\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"p-grid\", \n\t\t\t\t\t\t\t\ttitle: \"Phi Grid\"\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"symmetry\", \n\t\t\t\t\t\t\t\ttitle: \"Symmetry\"\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"g-triangles\",\n\t\t\t\t\t\t\t\ttitle: \t\"Golden Triangles\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \"g-spiral\",\n\t\t\t\t\t\t\t\ttitle: \t\"Golden Spiral\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \"g-harmonius\",\n\t\t\t\t\t\t\t\ttitle: \t\"Harmonius Triangles\"\n\t\t\t\t\t\t\t}\n];\n\nexport const localStorageKey = \"imgData\";","import { formats } from './../components/Config';\nimport \"lodash\";\n\nexport const formatByRatio = (ratio) => {\n\t\n\tfor( let key in formats ){\n\t\tif( formats[key].ratio.from <= ratio && ratio <= formats[key].ratio.to ){\n\t\t\treturn formats[key].key;\n\t\t}\n\t}\n}\n\nexport const saveAs = (uri, filename) => {\n\n    var link = document.createElement('a');\n\n    if (typeof link.download === 'string') {\n\n        link.href = uri;\n        link.download = filename;\n\n        //Firefox requires the link to be in the body\n        document.body.appendChild(link);\n\n        //simulate click\n        link.click();\n\n        //remove the link when done\n        document.body.removeChild(link);\n\n    } else {\n\n        window.open(uri);\n\n\t}\n}","import React, { useState,useEffect } from \"react\";\nimport _ from 'lodash';\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\nimport { baseUrl, formats, rules, centers, orientations } from './../components/Config';\nimport { saveAs } from './../components/Helpers';\n\n\n\nfunction Orientation(props){\n\n\tconst [items, \t\t\tsetItems] \t\t\t\t= useState([]);\n\n\tuseEffect(() => {\n\t\tconst itemList = (\n\t\t\t<React.Fragment>\n\t\t\t\t{centers.map( (center,idx) => {\n\t\t\t\t\tlet itemClass = ( center.key === props.current ) ? 'active' : '';\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span key={idx} className={`orientation__${center.key} ${itemClass}`}>{center.title}</span>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</React.Fragment>\n\t\t);\n\t\tsetItems(itemList);\n\t}, [props]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{items}\n\t\t</React.Fragment>\n\t)\n}\n\n\n\nfunction Header(props){\n\n\tconst [rule, \t\t\tsetRule] \t\t\t\t= useState('');\n\tconst [format, \t\t\tsetFormat] \t\t\t\t= useState('');\n\tconst [orientation, \tsetOrientation] \t\t= useState('');\n\tconst [centering, \t\tsetCenter] \t\t\t\t= useState('');\n\tconst [loading, \t\tsetLoading] \t\t\t= useState(false);\n\n\t// get format and rule from state/config\n\tuseEffect(() => {\n\t\tif( props.state.format && props.state.rule ){\n\t\t\tsetRule(rules[ _.findKey(rules, {key: props.state.rule } )]['title'] );\n\t\t\tsetFormat(formats[ _.findKey(formats, {key: props.state.format } )]['title'] );\n\t\t}\n\t\tif( props.state.center ){\n\t\t\tsetCenter(centers[ _.findKey(centers, {key: props.state.center } )] );\n\t\t}\n\t\tif( props.imageData && props.imageData.orientation ){\n\t\t\tsetOrientation(orientations[ _.findKey(orientations, {key: props.imageData.orientation } )]['title'] );\n\t\t}\n\t}, [props]);\n\n\t// upload new file in LS\n\tconst doUpload = (e) =>{\n\n\t\tsetLoading(true);\n\n\t\tconst data = new FormData() \n\t\tdata.append('file', e.target.files[0]);\n\t\taxios.post(`${baseUrl}imgTo64.php`, data, {})\n\t\t.then(res => {\n\t\t\tprops.setImage(res.data);\n\t\t\tsetLoading(false);\n\t\t})\n\t}\n\n\t// reset file in LS\n\tconst doReset = () => {\n\t\tprops.setImage(null)\n\t}\n\n\t// save file\n\tconst doSave = (params) => {\n\t\thtml2canvas(\n\t\t\tdocument.querySelector(\".drag\"),{\n\t\t\t\tignoreElements: function(el) {  \n\t\t\t\t\treturn (params.rules) \n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: el.classList.contains('rule') \n\t\t\t\t},\n\t\t\t\tscale: 2\n\t\t\t}\n\t\t).then(canvas => {\n\t\t\tlet now = new Date();\n\t\t\tvar date = now.getDate();\n\t\t\tvar month = now.getMonth();\n\t\t\tvar year = now.getFullYear();\n\t\t\tlet filename = `composition_${props.state.rule}_${props.state.format}_${date}${month}${year}.png`;\n\t\t\tsaveAs(canvas.toDataURL(), filename);\n\t\t});\n\t}\n\n\t// recenter\n\tconst doCentering = () => {\n\t\tprops.setCenter();\n\t}\n\n\treturn (\n\n\t\t<header className=\"header clearfix\">\n\t\t\t\n\t\t\t<div className=\"left clearfix\">\n\n\t\t\t\t{ props.imageData &&\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{ format }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{rule}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{<label className=\"right\">\n\t\t\t\t\t\t\t<button className=\"btn orientations\" onClick={(e) => doCentering()}>\n\t\t\t\t\t\t\t\t<Orientation current={centering.key} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</label>}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t<div className=\"right\">\n\n\t\t\t\t<strong>\n\t\t\t\t{ \n\t\t\t\t\t<div className={`upload-btn-wrapper`} data-loading={loading}>\n\t\t\t\t\t\t<button className=\"btn btn--accent btn--large\">+</button>\n\t\t\t\t\t\t<input type=\"file\" name=\"file\" accept=\"image/*\" onChange={(e) => doUpload(e)} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t{ props.imageData &&  1==2 && \n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{/* \n\t\t\t\t\t\t<button className=\"btn\" onClick={(e) => doSave({rules: true})}>get rules</button>\n\t\t\t\t\t\t<button className=\"btn btn--ui\" onClick={(e) => doSave({rules: false})}>Download</button>\n\t\t\t\t\t\t*/}\n\t\t\t\t\t\t<button className=\"btn btn--accent btn--large\" onClick={(e) => doUpload()}>+</button> \n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t\t</strong>\n\t\t\t</div>\n\n\t\t</header>\n\n\t);\n}\n\nexport default Header;\n","import React from \"react\";\n\nfunction Footer(){\n\n\treturn (\n\n\t\t<footer className=\"footer clearfix\">\n\t\t\t\n\t\t\t<div className=\"left\">\n\t\t\t\tComposition @ 2020.\n\t\t\t</div> \n\t\t\t<div className=\"right\">\n\t\t\t\tMade with love.\n\t\t\t</div>\n\n\t\t</footer>\n\n\t);\n}\n\nexport default Footer;\n","import React,{useState, useEffect} from \"react\";\n//import _ from 'lodash';\nimport { baseUrl,rules } from './../components/Config';\nimport SVG from 'react-inlinesvg';\n\nfunction Rule(props){\n\n\tconst [rule, \tsetRule] \t= useState('');\n\n\t// get rule from state/config\n\tuseEffect(() => {\n\t\tif( props.rule && props.format ){\n\t\t\t//let ruleObj = rules[ _.findKey(rules, {key: props.rule } )];\n\t\t\tlet rulePath = `${baseUrl}rules/${props.format}_${props.rule}.svg`;\n\t\t\tsetRule( rulePath );\n\t\t}\n\t}, [props]);\n\n\treturn (\n\n\t\t<div className=\"rule\">\n\n\t\t\t{ rule && \n\t\t\t\t<SVG \tclassName=\"rule__svg\" \n\t\t\t\t\t\tloader={<span className=\"rule__loading\"></span>}\n\t\t\t\t\t\tsrc={rule} />\n\t\t\t}\n\t\t\t\n\t\t</div>\n\n\t);\n}\n\nexport default Rule;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport {Swipe} from \"react-swipe-component\"\nimport Rule from './../components/Rule';\nimport { stateInitial,rules,formats } from './../components/Config';\nimport _ from 'lodash';\n\nlet swipeDeltaX = 0;\nlet swipeDeltaY = 0;\n\nconst Drag = (props) => {\n\n\tconst refDrag = useRef(null);\n\n\tconst [swipeState, \t\tsetSwipeState] \t\t= useState(stateInitial);\n\n\t// update state from props \n\tuseEffect(() => {\n\t\tif( props.state ){\n\t\t\tsetSwipeState(props.state);\n\t\t}\n\t}, [props.state]);\n\t\n\t// swiper methods\n\tconst onSwipe = (e) => {\n\t\tswipeDeltaX = e.x;\n\t\tswipeDeltaY = e.y;\n\t\ttransformOnDrag(swipeDeltaX,swipeDeltaY);\n\t}\n\tconst onSwipeEnd = (e) => {\n\t\t// get current keys\n\t\tlet state = {...swipeState};\n\t\tlet currentRule = parseInt( _.findKey(rules, {key: state.rule} ) );\n\t\tlet currentFormat = parseInt( _.findKey(formats, {key: state.format} ) );\n\t\t// get swipe direction\n\t\tlet direction = \"\";\n\t\tif( Math.abs(swipeDeltaX) > Math.abs(swipeDeltaY) ){\n\t\t\tdirection = ( swipeDeltaX > 0 ) ? \"right\" : \"left\";\n\t\t}else{\n\t\t\tdirection = ( swipeDeltaY > 0 ) ? \"bottom\" : \"top\";\n\t\t}\n\n\t\t// update keys\n\t\tswitch( direction ){\n\t\t\t// rule prev\n\t\t\tcase \"right\":\n\t\t\t\tstate.rule = (currentRule > 0) ? rules[currentRule-1].key : rules[rules.length-1].key;\n\t\t\t\tbreak;\n\t\t\t// rule next\n\t\t\tcase \"left\":\n\t\t\t\tstate.rule = (rules.length-1 > currentRule) ? rules[currentRule+1].key : rules[0].key;\n\t\t\t\tbreak;\n\t\t\t// format prev\n\t\t\tcase \"top\":\n\t\t\t\tstate.format = (currentFormat > 0) ? formats[currentFormat-1].key : formats[formats.length-1].key;\n\t\t\t\tbreak;\n\t\t\t// format next\n\t\t\tcase \"bottom\":\n\t\t\t\tstate.format = (formats.length-1 > currentFormat) ? formats[currentFormat+1].key : formats[0].key;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//\n\t\t}\n\t\t// set swipe direction\n\t\tsetSwipeState(state)\n\t\t// set external props\n\t\tprops.onSwipe({state:state, direction: direction});\n\t\t// reset transformation\n\t\ttransformOnDrag(0,0);\n\t}\n\n\t// on swipe : transformations\n\tconst transformOnDrag = (x,y) => {\n\t\tx = x*.2;\n\t\ty = y*.1;\n\t\trefDrag.current.style.transform = ( Math.abs(x) > Math.abs(y) ) \n\t\t\t? `translate(${x}px,0px)` \n\t\t\t: `translate(0px,${y}px)` \n\t\t;\n\t}\n\n\treturn (\n\n\t\t<React.Fragment>\n\t\t\t\n\t\t\t<div className=\"drag-container\" data-orientation={props.imageData.orientation} ref={refDrag}>\n\t\t\t\t<Swipe\n\t\t\t\t\tnodeName=\"figure\"\n\t\t\t\t\tclassName={`drag drag--rule-${swipeState.rule} drag--format-${swipeState.format} drag--center-${swipeState.center}`}\n\t\t\t\t\tstyle={{backgroundImage: `url(${props.imageData.base64})`}}\n\t\t\t\t\tonSwipe={ (e)=>{ onSwipe(e) } }\n\t\t\t\t\tonSwipeEnd={ (e) => { onSwipeEnd(e) } }\n\t\t\t\t\tdetectMouse={true}\n\t\t\t\t\tdetectTouch={true} \n\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\tstopPropagation={true}>\t\n\t\t\t\t\t<Rule \trule={swipeState.rule} \n\t\t\t\t\t\t\tformat={swipeState.format}\n\t\t\t\t\t\t\torientation={props.imageData.orientation} />\n\n\t\t\t\t</Swipe>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t</React.Fragment>\n\n\t);\n}\n\nexport default Drag;\n","import React, { useState,useEffect } from \"react\";\n\nimport Header from \t\t'./../components/Header';\nimport Footer from \t\t'./../components/Footer';\nimport Drag from \t\t'./../components/Drag';\n\nimport { baseUrl, rules, centers, stateInitial, localStorageKey } from './../components/Config';\nimport { formatByRatio } from './../components/Helpers';\nimport _ from \"lodash\";\n\nfunction Main(){\n\n\tconst [swipeState, \t\tsetSwipeState] \t\t= useState({state:stateInitial});\n\tconst [headerState, \tsetHeaderState] \t= useState(true);\n\tconst [footerState, \tsetFooterState] \t= useState(true);\n\tconst [imageData, \t\tsetImageData] \t\t= useState(null);\n\n\t// check local storage for image\n\tuseEffect(() => {\n\t\tlet lsData = localStorage.getItem(localStorageKey);\n\t\tif( lsData ){\n\t\t\tlet imgData = JSON.parse( lsData );\n\t\t\t// get img format from ratio\n\t\t\tlet imgFormat = formatByRatio(imgData.ratio);\n\t\t\t// set ratio\n\t\t\tsetSwipeState({state: {\tformat: \t\timgFormat,\n\t\t\t\t\t\t\t\t\torientation: \timgData['orientation'],\n\t\t\t\t\t\t\t\t\trule: \t\t\tstateInitial['rule'],\n\t\t\t\t\t\t\t\t\tcenter: \t\tstateInitial['center']\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\tsetImageData( imgData );\n\t\t}\n\n\t}, []);\n\n\t// on drag event\n\tuseEffect(() => {\n\t\tswitch ( swipeState.direction ) {\n\t\t\t// initial state from Drag component\n\t\t\tcase 'init':\n\t\t\t\tsetHeaderState( true );\n\t\t\t\tsetFooterState( true );\n\t\t\t\tbreak;\n\t\t\tdefault: \n\t\t\t\tsetHeaderState( true );\n\t\t\t\tsetFooterState( true );\n\t\t}\n\t}, [swipeState]);\n\n\t// update swipe state\n\tconst onSwipe = (state) => {\n\t\tsetSwipeState(state);\n\t}\n\n\t// set new image or reset existing one\n\tconst setImage = (imgData) => {\n\t\tif( imgData !== null ){\n\t\t\t// update format\n\t\t\tlet imgFormat = formatByRatio( imgData.ratio );\n\t\t\tsetSwipeState({state: {\tformat: imgFormat, \n\t\t\t\t\t\t\t\t\trule: \tswipeState.state.rule,\n\t\t\t\t\t\t\t\t\tcenter: swipeState.state.center,\n\t\t\t\t\t\t\t\t\torientation: \tswipeState.state.orientation }\n\t\t\t\t\t\t});\n\t\t\t// save LS\n\t\t\tlocalStorage.setItem(localStorageKey, JSON.stringify( imgData ) );\n\t\t}else{\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t}\n\t\tsetImageData( imgData );\n\t}\n\n\t// centering the image\n\tconst setCenter = () => {\n\t\tlet state = {...swipeState.state};\n\t\tlet currentCenter = parseInt( _.findKey(centers, {key: state.center }) );\n\t\tlet nextCenter = ( centers.length -1 > currentCenter ) ? centers[currentCenter+1] : centers[0];\n\t\tstate.center = nextCenter.key;\n\t\tsetSwipeState({\tstate: state});\n\t}\n\n\treturn (\n\n\t\t<div className=\"main\">\n\t\t\t\n\t\t\t{ headerState && \n\t\t\t\t<Header \tstate={swipeState.state} \n\t\t\t\t\t\t\timageData={imageData}\n\t\t\t\t\t\t\tsetImage={setImage}\n\t\t\t\t\t\t\tsetCenter={setCenter} /> \n\t\t\t}\n\n\t\t\t{ imageData && \n\t\t\t\t<Drag \t\tstate={swipeState.state}\n\t\t\t\t\t\t\timageData={imageData}\n\t\t\t\t\t\t\tonSwipe={onSwipe} /> \n\t\t\t}\n\n\t\t\t{ imageData === null && \n\t\t\t\t<div className=\"hello\">\n\t\t\t\t\t<h1>Applied <label>Composition</label></h1>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUse the top <label>+</label> button to load an image or to take a picture.\n\t\t\t\t\t\tSwipe <label>up/down</label> to change the crop of the picture.\n\t\t\t\t\t\tSwipe <label>left/right</label> to change the composition rule applied to the image.\n\t\t\t\t\t\tClick on the <label>center icon</label> to change the image centering.\n\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\tAs usual, do not forget to <label>have fun</label> while using this tool.\n\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t<small className=\"gray\">* Images are not uploaded to a server, they are stored on your device.</small>\n\t\t\t\t\t</p>\n\t\t\t\t\t<img className=\"hello__img\" src={`${baseUrl}rules/homepage.svg`} alt=\"\" />\n\t\t\t\t</div> \n\t\t\t}\n\t\t\t\n\t\t\t{ footerState && <Footer /> }\n\n\t\t</div>\n\n\t);\n}\n\nexport default Main;\n","import React from 'react';\nimport Main from './components/Main';\n\nimport './styles/index.scss';\n\nfunction App() {\n  return (\n\n    <div className=\"App\">\n      <Main />\n    </div>\n\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}