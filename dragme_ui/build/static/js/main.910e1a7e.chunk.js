(this.webpackJsonpcomposition=this.webpackJsonpcomposition||[]).push([[0],{20:function(e,t,a){e.exports=a(46)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),o=a(4),i=a(1),s=a(3),m=a.n(s),u=a(15),f=a.n(u),g=(a(16),"https://www.borisvidosevic.com/composition/"),b={format:"4-3",rule:"r-thirds",center:"c-c",orientation:""},d=[{key:"t-l",title:"t l"},{key:"t-c",title:"t c"},{key:"t-r",title:"t r"},{key:"c-r",title:"c r"},{key:"b-r",title:"b r"},{key:"b-c",title:"b c"},{key:"b-l",title:"b l"},{key:"c-l",title:"c l"},{key:"c-c",title:"c c"}],p=[{key:"9-16",title:"Portrait 16:9",ratio:{from:.2,to:.65}},{key:"2-3",title:"Portrait 3:2",ratio:{from:.66,to:.74}},{key:"3-4",title:"Portrait 4:3",ratio:{from:.75,to:.79}},{key:"4-5",title:"Portrait 5:4",ratio:{from:.8,to:.89}},{key:"1-1",title:"Square 1:1",ratio:{from:.9,to:1.24}},{key:"5-4",title:"Landscape 5:4",ratio:{from:1.25,to:1.32}},{key:"4-3",title:"Landscape 4:3",ratio:{from:1.33,to:1.49}},{key:"3-2",title:"Landscape 3:2",ratio:{from:1.5,to:1.75}},{key:"16-9",title:"Landscape 16:9",ratio:{from:1.76,to:3}}],y=[{key:"square",title:"Square"},{key:"landscape",title:"Landscape"},{key:"portrait",title:"Portrait"}],k=[{key:"r-thirds",title:"Rule Of Thirds"},{key:"p-grid",title:"Phi Grid"},{key:"symmetry",title:"Symmetry"},{key:"g-triangles",title:"Golden Triangles"},{key:"g-spiral",title:"Golden Spiral"},{key:"g-harmonius",title:"Harmonius Triangles"}],h=function(e){for(var t in p)if(p[t].ratio.from<=e&&e<=p[t].ratio.to)return p[t].key};function E(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=r.a.createElement(r.a.Fragment,null,d.map((function(t,a){var n=t.key===e.current?"active":"";return r.a.createElement("span",{key:a,className:"orientation__".concat(t.key," ").concat(n)},t.title)})));c(t)}),[e]),r.a.createElement(r.a.Fragment,null,l)}var v=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],b=s[1],h=Object(n.useState)(""),v=Object(i.a)(h,2),O=(v[0],v[1]),j=Object(n.useState)(""),S=Object(i.a)(j,2),w=S[0],N=S[1],D=Object(n.useState)(!1),I=Object(i.a)(D,2),x=I[0],_=I[1];Object(n.useEffect)((function(){e.state.format&&e.state.rule&&(c(k[m.a.findKey(k,{key:e.state.rule})].title),b(p[m.a.findKey(p,{key:e.state.format})].title)),e.state.center&&N(d[m.a.findKey(d,{key:e.state.center})]),e.imageData&&e.imageData.orientation&&O(y[m.a.findKey(y,{key:e.imageData.orientation})].title)}),[e]);var C=function(t){_(!0);var a=new FormData;a.append("file",t.target.files[0]),f.a.post("".concat(g,"imgTo64.php"),a,{}).then((function(t){e.setImage(t.data),_(!1)}))};return r.a.createElement("header",{className:"header clearfix"},r.a.createElement("div",{className:"left clearfix"},e.imageData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,u),"\xa0",r.a.createElement("label",null,l),r.a.createElement("label",{className:"right"},r.a.createElement("button",{className:"btn orientations",onClick:function(t){e.setCenter()}},r.a.createElement(E,{current:w.key}))))),r.a.createElement("div",{className:"right"},r.a.createElement("strong",null,r.a.createElement("div",{className:"upload-btn-wrapper","data-loading":x},r.a.createElement("button",{className:"btn btn--accent btn--large"},"+"),r.a.createElement("input",{type:"file",name:"file",accept:"image/*",onChange:function(e){return C(e)}})),e.imageData&&!1)))};var O=function(){return r.a.createElement("footer",{className:"footer clearfix"},r.a.createElement("div",{className:"left"},"Composition @ 2020."),r.a.createElement("div",{className:"right"},"Made with love."))},j=a(17),S=a(19);var w=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){if(e.rule&&e.format){var t="".concat(g,"rules/").concat(e.format,"_").concat(e.rule,".svg");c(t)}}),[e]),r.a.createElement("div",{className:"rule"},l&&r.a.createElement(S.a,{className:"rule__svg",loader:r.a.createElement("span",{className:"rule__loading"}),src:l}))},N=0,D=0,I=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(b),l=Object(i.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){e.state&&s(e.state)}),[e.state]);var u=function(e,a){e*=.2,a*=.1,t.current.style.transform=Math.abs(e)>Math.abs(a)?"translate(".concat(e,"px,0px)"):"translate(0px,".concat(a,"px)")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drag-container","data-orientation":e.imageData.orientation,ref:t},r.a.createElement(j.a,{nodeName:"figure",className:"drag drag--rule-".concat(c.rule," drag--format-").concat(c.format," drag--center-").concat(c.center),style:{backgroundImage:"url(".concat(e.imageData.base64,")")},onSwipe:function(e){!function(e){N=e.x,D=e.y,u(N,D)}(e)},onSwipeEnd:function(t){!function(t){var a=Object(o.a)({},c),n=parseInt(m.a.findKey(k,{key:a.rule})),r=parseInt(m.a.findKey(p,{key:a.format})),l="";switch(l=Math.abs(N)>Math.abs(D)?N>0?"right":"left":D>0?"bottom":"top"){case"right":a.rule=n>0?k[n-1].key:k[k.length-1].key;break;case"left":a.rule=k.length-1>n?k[n+1].key:k[0].key;break;case"top":a.format=r>0?p[r-1].key:p[p.length-1].key;break;case"bottom":a.format=p.length-1>r?p[r+1].key:p[0].key}s(a),e.onSwipe({state:a,direction:l}),u(0,0)}()},detectMouse:!0,detectTouch:!0,preventDefault:!0,stopPropagation:!0},r.a.createElement(w,{rule:c.rule,format:c.format,orientation:e.imageData.orientation}))))};var x=function(){var e=Object(n.useState)({state:b}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),s=Object(i.a)(c,2),u=s[0],f=s[1],p=Object(n.useState)(!0),y=Object(i.a)(p,2),k=y[0],E=y[1],j=Object(n.useState)(null),S=Object(i.a)(j,2),w=S[0],N=S[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("imgData");if(e){var t=JSON.parse(e),a=h(t.ratio);l({state:{format:a,orientation:t.orientation,rule:b.rule,center:b.center}}),N(t)}}),[]),Object(n.useEffect)((function(){switch(a.direction){case"init":f(!0),E(!0);break;default:f(!0),E(!0)}}),[a]),r.a.createElement("div",{className:"main"},u&&r.a.createElement(v,{state:a.state,imageData:w,setImage:function(e){if(null!==e){var t=h(e.ratio);l({state:{format:t,rule:a.state.rule,center:a.state.center,orientation:a.state.orientation}}),localStorage.setItem("imgData",JSON.stringify(e))}else localStorage.removeItem("imgData");N(e)},setCenter:function(){var e=Object(o.a)({},a.state),t=parseInt(m.a.findKey(d,{key:e.center})),n=d.length-1>t?d[t+1]:d[0];e.center=n.key,l({state:e})}}),w&&r.a.createElement(I,{state:a.state,imageData:w,onSwipe:function(e){l(e)}}),null===w&&r.a.createElement("div",{className:"hello"},r.a.createElement("h1",null,"Applied ",r.a.createElement("label",null,"Composition")),r.a.createElement("p",null,"Use the top ",r.a.createElement("label",null,"+")," button to load an image or to take a picture. Swipe ",r.a.createElement("label",null,"up/down")," to change the crop of the picture. Swipe ",r.a.createElement("label",null,"left/right")," to change the composition rule applied to the image. Click on the ",r.a.createElement("label",null,"center icon")," to change the image centering.",r.a.createElement("br",null),r.a.createElement("br",null),"As usual, do not forget to ",r.a.createElement("label",null,"have fun")," while using this tool.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",{className:"gray"},"* Images are not uploaded to a server, they are stored on your device.")),r.a.createElement("img",{className:"hello__img",src:"".concat(g,"rules/homepage.svg"),alt:""})),k&&r.a.createElement(O,null))};a(44);var _=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,null))};a(45),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.910e1a7e.chunk.js.map