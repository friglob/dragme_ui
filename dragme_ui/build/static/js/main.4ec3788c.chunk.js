(this.webpackJsonpcomposition=this.webpackJsonpcomposition||[]).push([[0],{20:function(e,t,a){e.exports=a(46)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=a(5),i=a(1),s=a(3),m=a.n(s),u=a(16),f=a.n(u),g=(a(17),"https://www.borisvidosevic.com/composition/"),d={format:"4-3",rule:"r-thirds",center:"c-c",orientation:""},b=[{key:"t-l",title:"t l"},{key:"t-c",title:"t c"},{key:"t-r",title:"t r"},{key:"c-l",title:"c l"},{key:"c-c",title:"c c"},{key:"c-r",title:"c r"},{key:"b-l",title:"b l"},{key:"b-c",title:"b c"},{key:"b-r",title:"b r"}],p=[{key:"9-16",title:"Portrait 16:9",ratio:{from:.2,to:.65}},{key:"2-3",title:"Portrait 3:2",ratio:{from:.66,to:.74}},{key:"3-4",title:"Portrait 4:3",ratio:{from:.75,to:.79}},{key:"4-5",title:"Portrait 5:4",ratio:{from:.8,to:.89}},{key:"1-1",title:"Square 1:1",ratio:{from:.9,to:1.24}},{key:"5-4",title:"Landscape 5:4",ratio:{from:1.25,to:1.32}},{key:"4-3",title:"Landscape 4:3",ratio:{from:1.33,to:1.49}},{key:"3-2",title:"Landscape 3:2",ratio:{from:1.5,to:1.75}},{key:"16-9",title:"Landscape 16:9",ratio:{from:1.76,to:3}}],y=[{key:"square",title:"Square"},{key:"landscape",title:"Landscape"},{key:"portrait",title:"Portrait"}],v=[{key:"r-thirds",title:"Rule Of Thirds"},{key:"p-grid",title:"Phi Grid"},{key:"symmetry",title:"Symmetry"},{key:"g-triangles",title:"Golden Triangles"},{key:"g-spiral",title:"Golden Spiral"}],E=function(e){for(var t in p)if(p[t].ratio.from<=e&&e<=p[t].ratio.to)return p[t].key},h=a(4);function k(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=r.a.createElement(r.a.Fragment,null,b.map((function(t,a){var n=t.key===e.current?"active":"";return r.a.createElement("span",{key:a,className:"orientation__".concat(t.key," ").concat(n)},t.title)})));c(t)}),[e]),r.a.createElement(r.a.Fragment,null,l)}var O=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],E=Object(n.useState)(""),O=Object(i.a)(E,2),j=(O[0],O[1]),N=Object(n.useState)(""),_=Object(i.a)(N,2),S=_[0],w=_[1],D=Object(n.useState)(!1),I=Object(i.a)(D,2),x=I[0],C=I[1];Object(n.useEffect)((function(){e.state.format&&e.state.rule&&(c(v[m.a.findKey(v,{key:e.state.rule})].title),d(p[m.a.findKey(p,{key:e.state.format})].title)),e.state.center&&w(b[m.a.findKey(b,{key:e.state.center})]),e.imageData&&e.imageData.orientation&&j(y[m.a.findKey(y,{key:e.imageData.orientation})].title)}),[e]);var F=function(t){C(!0);var a=new FormData;a.append("file",t.target.files[0]),f.a.post("".concat(g,"imgTo64.php"),a,{}).then((function(t){e.setImage(t.data),C(!1)}))};return r.a.createElement("header",{className:"header clearfix"},r.a.createElement("div",{className:"left clearfix"},e.imageData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,r.a.createElement(h.a,{className:"header__svg-vertical",src:"".concat(g,"svg/vertical.svg")}),u),"\xa0",r.a.createElement("label",null,r.a.createElement(h.a,{className:"header__svg-vertical",src:"".concat(g,"svg/horizontal.svg")}),l),r.a.createElement("label",{className:"right"},r.a.createElement("button",{className:"btn orientations",onClick:function(t){e.setCenter()}},r.a.createElement(k,{current:S.key}))))),r.a.createElement("div",{className:"right"},r.a.createElement("strong",null,r.a.createElement("div",{className:"upload-btn-wrapper","data-loading":x},r.a.createElement("button",{className:"btn btn--accent btn--large"},"+"),r.a.createElement("input",{type:"file",name:"file",accept:"image/*",onChange:function(e){return F(e)}})),e.imageData&&!1)))};var j=function(e){return r.a.createElement("footer",{className:"footer clearfix"},r.a.createElement("div",{className:"footer__cta"},e.imageData&&r.a.createElement("span",{onClick:function(t){e.setImage(null)}},"Clear")),r.a.createElement("div",{className:"footer__info"},e.imageData&&r.a.createElement("a",{href:"mailto:boris.vidosevic@gmail.com?subject=compositions"},"I need more formats/rules."),!e.imageData&&r.a.createElement("span",null,"Made with",r.a.createElement(h.a,{className:"footer__svg",loader:r.a.createElement("span",{className:"footer__loading"}),src:"".concat(g,"svg/heart.svg")}))))},N=a(19);var _=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){if(e.rule&&e.format){var t="".concat(g,"rules/").concat(e.format,"_").concat(e.rule,".svg");c(t)}}),[e]),r.a.createElement("div",{className:"rule"},l&&r.a.createElement(h.a,{className:"rule__svg",loader:r.a.createElement("span",{className:"rule__loading"}),src:l}))};var S=0,w=0,D=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(d),l=Object(i.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){e.state&&s(e.state)}),[e.state]);var u=function(e,a){e*=.2,a*=.1,t.current.style.transform=Math.abs(e)>Math.abs(a)?"translate(".concat(e,"px,0px)"):"translate(0px,".concat(a,"px)")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drag-container","data-orientation":e.imageData.orientation,ref:t},r.a.createElement(N.a,{nodeName:"figure",className:"drag drag--rule-".concat(c.rule," drag--format-").concat(c.format," drag--center-").concat(c.center),style:{backgroundImage:"url(".concat(e.imageData.base64,")")},onSwipe:function(e){!function(e){S=e.x,w=e.y,u(S,w)}(e)},onSwipeEnd:function(t){!function(t){var a=Object(o.a)({},c),n=parseInt(m.a.findKey(v,{key:a.rule})),r=parseInt(m.a.findKey(p,{key:a.format})),l="";switch(l=Math.abs(S)>Math.abs(w)?S>0?"right":"left":w>0?"bottom":"top"){case"right":a.rule=n>0?v[n-1].key:v[v.length-1].key;break;case"left":a.rule=v.length-1>n?v[n+1].key:v[0].key;break;case"top":a.format=r>0?p[r-1].key:p[p.length-1].key;break;case"bottom":a.format=p.length-1>r?p[r+1].key:p[0].key}s(a),e.onSwipe({state:a,direction:l}),u(0,0)}()},detectMouse:!0,detectTouch:!0,preventDefault:!0,stopPropagation:!0},r.a.createElement(_,{rule:c.rule,format:c.format,orientation:e.imageData.orientation}))))};var I=function(){var e=Object(n.useState)({state:d}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),s=Object(i.a)(c,2),u=s[0],f=s[1],p=Object(n.useState)(!0),y=Object(i.a)(p,2),v=y[0],k=y[1],N=Object(n.useState)(null),_=Object(i.a)(N,2),S=_[0],w=_[1];Object(n.useEffect)((function(){var e=localStorage.getItem("imgData");if(e){var t=JSON.parse(e),a=E(t.ratio);l({state:{format:a,orientation:t.orientation,rule:d.rule,center:d.center}}),w(t)}}),[]),Object(n.useEffect)((function(){switch(a.direction){case"init":f(!0),k(!0);break;default:f(!0),k(!0)}}),[a]);var I=function(e){if(null!==e){var t=E(e.ratio);l({state:{format:t,rule:a.state.rule,center:a.state.center,orientation:a.state.orientation}}),localStorage.setItem("imgData",JSON.stringify(e)),window.document.title=e.filename}else localStorage.removeItem("imgData"),window.document.title="Compositions & Formats";w(e)};return r.a.createElement("div",{className:"main"},u&&r.a.createElement(O,{state:a.state,imageData:S,setImage:I,setCenter:function(){var e=Object(o.a)({},a.state),t=parseInt(m.a.findKey(b,{key:e.center})),n=b.length-1>t?b[t+1]:b[0];e.center=n.key,l({state:e})}}),S&&r.a.createElement(D,{state:a.state,imageData:S,onSwipe:function(e){l(e)}}),null===S&&r.a.createElement("div",{className:"hello"},r.a.createElement(h.a,{className:"hello__svg",loader:r.a.createElement("span",{className:"hello__loading"}),src:"".concat(g,"svg/homepage.svg")}),r.a.createElement("h1",{className:"hello__title"},"Compositions",r.a.createElement("br",null),r.a.createElement("label",null,"& Formats")),r.a.createElement("h2",{className:"hello__subtitle"},"Use the top ",r.a.createElement("label",null,"+")," button to load or take an image."),r.a.createElement("p",{className:"hello__description"},"Swipe ",r.a.createElement("label",null,"up / down")," to change the crop format of the loaded image. \xa0 Swipe ",r.a.createElement("label",null,"left / right")," to change the composition rule applied to the image. \xa0 Tap/click on the ",r.a.createElement("label",null,"grid dots")," to point to the important part of image.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",{className:"gray"},"* Images are not stored on any server."))),v&&r.a.createElement(j,{setImage:I,imageData:S}))};a(44);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(I,null))};a(45),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.4ec3788c.chunk.js.map