(this.webpackJsonploop=this.webpackJsonploop||[]).push([[0],{18:function(e,t,a){e.exports=a(44)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),o=a(4),i=a(1),s=a(3),u=a.n(s),m=a(15),f=a.n(m),g=a(16),d=a.n(g),b={format:"4-3",rule:"thirds",center:"c-c",orientation:""},y=[{key:"t-l",title:"t l"},{key:"t-c",title:"t c"},{key:"t-r",title:"t r"},{key:"c-r",title:"c r"},{key:"b-r",title:"b r"},{key:"b-c",title:"b c"},{key:"b-l",title:"b l"},{key:"c-l",title:"c l"},{key:"c-c",title:"c c"}],p=[{key:"9-16",title:"Portrait 16:9",ratio:{from:.1,to:.7}},{key:"2-3",title:"Portrait 3:2",ratio:{from:.71,to:.8}},{key:"3-4",title:"Portrait 4:3",ratio:{from:.81,to:.9}},{key:"4-5",title:"Portrait 5:4",ratio:{from:.91,to:.98}},{key:"1-1",title:"Square 1:1",ratio:{from:.99,to:1.01}},{key:"5-4",title:"Landscape 5:4",ratio:{from:1.02,to:1.2}},{key:"4-3",title:"Landscape 4:3",ratio:{from:1.21,to:1.3}},{key:"3-2",title:"Landscape 3:2",ratio:{from:1.31,to:1.4}},{key:"16-9",title:"Landscape 16:9",ratio:{from:1.41,to:3}}],h=[{key:"thirds",title:"Thirds"},{key:"fourths",title:"Fourths"},{key:"sixths",title:"Sixths"},{key:"fibonaci",title:"Fibonaci"},{key:"golden",title:"Golden Ratio"}],k=[{key:"square",title:"Square"},{key:"landscape",title:"Landscape"},{key:"portrait",title:"Portrait"}],E=function(e){for(var t in p)if(p[t].ratio.from<=e&&e<=p[t].ratio.to)return p[t].key};function v(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=r.a.createElement(r.a.Fragment,null,y.map((function(t,a){var n=t.key===e.current?"active":"";return r.a.createElement("span",{key:a,className:"orientation__".concat(t.key," ").concat(n)},t.title)})));c(t)}),[e]),r.a.createElement(r.a.Fragment,null,l)}var O=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),m=s[0],g=s[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),O=(E[0],E[1]),j=Object(n.useState)(""),w=Object(i.a)(j,2),S=w[0],N=w[1],D=Object(n.useState)(!1),I=Object(i.a)(D,2),C=I[0],x=I[1];Object(n.useEffect)((function(){e.state.format&&e.state.rule&&(c(h[u.a.findKey(h,{key:e.state.rule})].title),g(p[u.a.findKey(p,{key:e.state.format})].title)),e.state.center&&N(y[u.a.findKey(y,{key:e.state.center})]),e.imageData&&e.imageData.orientation&&O(k[u.a.findKey(k,{key:e.imageData.orientation})].title)}),[e]);var F=function(t){d()(document.querySelector(".drag"),{ignoreElements:function(e){return!t.rules&&e.classList.contains("rule")},scale:1}).then((function(t){var a=new Date,n=a.getDate(),r=a.getMonth(),l=a.getFullYear(),c="composition_".concat(e.state.rule,"_").concat(e.state.format,"_").concat(n).concat(r).concat(l,".png");!function(e,t){var a=document.createElement("a");"string"===typeof a.download?(a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)):window.open(e)}(t.toDataURL(),c)}))};return r.a.createElement("header",{className:"header clearfix"},r.a.createElement("div",{className:"left"},e.imageData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,m),"\xa0",r.a.createElement("label",null,l),r.a.createElement("label",null,r.a.createElement("button",{className:"btn orientations",onClick:function(t){e.setCenter()}},r.a.createElement(v,{current:S.key}))))),r.a.createElement("div",{className:"right"},r.a.createElement("strong",null,!e.imageData&&r.a.createElement("div",{className:"upload-btn-wrapper","data-loading":C},r.a.createElement("button",{className:"btn btn--accent"},"+"),r.a.createElement("input",{type:"file",name:"file",accept:"image/*",onChange:function(t){return function(t){x(!0);var a=new FormData;a.append("file",t.target.files[0]),f.a.post("imgTo64.php",a,{}).then((function(t){e.setImage(t.data),x(!1)}))}(t)}})),e.imageData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn--ui",onClick:function(e){return F({rules:!1})}},"Download"),"\xa0",r.a.createElement("button",{className:"btn btn--accent",onClick:function(t){e.setImage(null)}},"New")))))};var j=function(){return r.a.createElement("footer",{className:"footer clearfix"},r.a.createElement("div",{className:"left"},"Composition @ 2020."),r.a.createElement("div",{className:"right"},"Made with love."))},w=a(17);var S=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){if(e.rule){var t=h[u.a.findKey(h,{key:e.rule})];c("rules/".concat(t.key,"_").concat(e.format,".svg"))}}),[e]),r.a.createElement("div",{className:"rule"},l&&r.a.createElement("img",{alt:"rule",src:l}))},N=0,D=0,I=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(b),l=Object(i.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){e.state&&s(e.state)}),[e.state]);var m=function(e,a){e*=.2,a*=.1,t.current.style.transform=Math.abs(e)>Math.abs(a)?"translate(".concat(e,"px,0px)"):"translate(0px,".concat(a,"px)")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drag-container","data-orientation":e.imageData.orientation,ref:t},r.a.createElement(w.a,{nodeName:"figure",className:"drag drag--rule-".concat(c.rule," drag--format-").concat(c.format," drag--center-").concat(c.center),style:{backgroundImage:"url(".concat(e.imageData.base64,")")},onSwipe:function(e){!function(e){N=e.x,D=e.y,m(N,D)}(e)},onSwipeEnd:function(t){!function(t){var a=Object(o.a)({},c),n=parseInt(u.a.findKey(h,{key:a.rule})),r=parseInt(u.a.findKey(p,{key:a.format})),l="";switch(l=Math.abs(N)>Math.abs(D)?N>0?"right":"left":D>0?"bottom":"top"){case"right":a.rule=n>0?h[n-1].key:h[h.length-1].key;break;case"left":a.rule=h.length-1>n?h[n+1].key:h[0].key;break;case"top":a.format=r>0?p[r-1].key:p[p.length-1].key;break;case"bottom":a.format=p.length-1>r?p[r+1].key:p[0].key}s(a),e.onSwipe({state:a,direction:l}),m(0,0)}()},detectMouse:!0,detectTouch:!0,preventDefault:!0,stopPropagation:!0},r.a.createElement(S,{rule:c.rule,format:c.format,orientation:e.imageData.orientation}))))};var C=function(){var e=Object(n.useState)({state:b}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),s=Object(i.a)(c,2),m=s[0],f=s[1],g=Object(n.useState)(!0),d=Object(i.a)(g,2),p=d[0],h=d[1],k=Object(n.useState)(null),v=Object(i.a)(k,2),w=v[0],S=v[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("imgData");if(e){var t=JSON.parse(e),a=E(t.ratio);l({state:{format:a,orientation:t.orientation,rule:b.rule,center:b.center}}),S(t)}}),[]),Object(n.useEffect)((function(){switch(a.direction){case"init":f(!0),h(!0);break;default:f(!0),h(!0)}}),[a]),r.a.createElement("div",{className:"main"},m&&r.a.createElement(O,{state:a.state,imageData:w,setImage:function(e){if(null!==e){var t=E(e.ratio);l({state:{format:t,rule:a.state.rule,center:a.state.center,orientation:a.state.orientation}}),localStorage.setItem("imgData",JSON.stringify(e))}else localStorage.removeItem("imgData");S(e)},setCenter:function(){var e=Object(o.a)({},a.state),t=parseInt(u.a.findKey(y,{key:e.center})),n=y.length-1>t?y[t+1]:y[0];e.center=n.key,l({state:e})}}),w&&r.a.createElement(I,{state:a.state,imageData:w,onSwipe:function(e){l(e)}}),null===w&&r.a.createElement("div",{className:"hello"},r.a.createElement("h1",null,"Applied ",r.a.createElement("label",null,"Composition")),r.a.createElement("p",null,"Use the top ",r.a.createElement("label",null,"+")," button to load an image or to take a picture. Swiping ",r.a.createElement("label",null,"up/down")," changes the crop of the picture. Swiping ",r.a.createElement("label",null,"left/right")," changes the grid rule applied to the image. Clicking on the ",r.a.createElement("label",null,"centering icon")," changes the center of the image focus.",r.a.createElement("br",null),r.a.createElement("br",null),"As usual, do not forget to ",r.a.createElement("label",null,"have fun")," while using this tool.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",{className:"gray"},"* Images are not uploaded to a server, they are stored on your device.")),r.a.createElement("img",{className:"hello__img",src:"dragme_ui/rules/homepage.svg",alt:""})),p&&r.a.createElement(j,null))};a(42);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,null))};a(43),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a053041c.chunk.js.map