{"version":3,"sources":["components/Config.js","components/Helpers.js","components/Header.js","components/Footer.js","components/Rule.js","components/Drag.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["stateInitial","centers","key","title","formats","ratio","from","to","rules","orientations","formatByRatio","Orientation","props","useState","items","setItems","useEffect","itemList","Fragment","map","center","idx","itemClass","current","className","Header","rule","setRule","format","setFormat","setOrientation","centering","setCenter","loading","setLoading","state","_","findKey","imageData","orientation","doSave","params","html2canvas","document","querySelector","ignoreElements","el","classList","contains","scale","then","canvas","now","Date","date","getDate","month","getMonth","year","getFullYear","filename","uri","link","createElement","download","href","body","appendChild","click","removeChild","window","open","saveAs","toDataURL","onClick","e","data-loading","type","name","accept","onChange","data","FormData","append","target","files","axios","post","res","setImage","doUpload","Footer","Rule","ruleObj","alt","src","swipeDeltaX","swipeDeltaY","Drag","refDrag","useRef","swipeState","setSwipeState","transformOnDrag","x","y","style","transform","Math","abs","data-orientation","ref","nodeName","backgroundImage","base64","onSwipe","onSwipeEnd","currentRule","parseInt","currentFormat","direction","length","detectMouse","detectTouch","preventDefault","stopPropagation","Main","headerState","setHeaderState","footerState","setFooterState","setImageData","lsData","localStorage","getItem","imgData","JSON","parse","imgFormat","setItem","stringify","removeItem","currentCenter","nextCenter","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.a053041c.chunk.js","sourcesContent":["\nexport const stateInitial = {\t\"format\": \t\t\"4-3\",\n\t\t\t\t\t\t\t\t\"rule\": \t\t\"thirds\",\n\t\t\t\t\t\t\t\t\"center\": \t\t\"c-c\",\n\t\t\t\t\t\t\t\t\"orientation\": \t\"\"\n};\n\nexport const centers = [\t{\tkey: \"t-l\",\n\t\t\t\t\t\t\t\ttitle: \"t l\"},\n\t\t\t\t\t\t\t{\tkey: \"t-c\",\n\t\t\t\t\t\t\t\ttitle: \"t c\"},\n\t\t\t\t\t\t\t{\tkey: \"t-r\",\n\t\t\t\t\t\t\t\ttitle: \"t r\"},\n\t\t\t\t\t\t\t{\tkey: \"c-r\",\n\t\t\t\t\t\t\t\ttitle: \"c r\" },\n\t\t\t\t\t\t\t{\tkey: \"b-r\",\n\t\t\t\t\t\t\t\ttitle: \"b r\"},\n\t\t\t\t\t\t\t{\tkey: \"b-c\",\n\t\t\t\t\t\t\t\ttitle: \"b c\"},\n\t\t\t\t\t\t\t{\tkey: \"b-l\",\n\t\t\t\t\t\t\t\ttitle: \"b l\"},\n\t\t\t\t\t\t\t{\tkey: \"c-l\",\n\t\t\t\t\t\t\t\ttitle: \"c l\"},\n\t\t\t\t\t\t\t{\tkey: \"c-c\",\n\t\t\t\t\t\t\t\ttitle: \"c c\"},\n];\n\nexport const formats = \t[\t{\tkey: \t\"9-16\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 16:9\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.1, to: 0.7}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"2-3\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 3:2\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.71, to: 0.8}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"3-4\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 4:3\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.81, to: 0.9}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"4-5\", \n\t\t\t\t\t\t\t\ttitle:\t\"Portrait 5:4\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.91, to: 0.98}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"1-1\", \n\t\t\t\t\t\t\t\ttitle:\t\"Square 1:1\",\n\t\t\t\t\t\t\t\tratio:  {from: 0.99, to: 1.01}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"5-4\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 5:4\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.02, to: 1.2}\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \t\"4-3\", \n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 4:3\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.21, to: 1.3}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"3-2\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 3:2\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.31, to: 1.4}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\tkey: \t\"16-9\",\n\t\t\t\t\t\t\t\ttitle: \t\"Landscape 16:9\",\n\t\t\t\t\t\t\t\tratio:  {from: 1.41, to: 3}\n\t\t\t\t\t\t\t}\n];\n\nexport const rules = \t[\t{\tkey: \"thirds\", \n\t\t\t\t\t\t\t\ttitle: \"Thirds\"\n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"fourths\", \n\t\t\t\t\t\t\t\ttitle: \t\"Fourths\" \n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"sixths\", \n\t\t\t\t\t\t\t\ttitle: \t\"Sixths\" \n\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t{\tkey: \"fibonaci\", \n\t\t\t\t\t\t\t\ttitle: \"Fibonaci\"\n\t\t\t\t\t\t\t},  \n\t\t\t\t\t\t\t{\tkey: \"golden\",\n\t\t\t\t\t\t\t\ttitle: \t\"Golden Ratio\"\n\t\t\t\t\t\t\t}\n];\n\nexport const orientations = [\t{\tkey: \"square\", \n\t\t\t\t\t\t\t\t\ttitle: \"Square\"\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t{\tkey: \"landscape\", \n\t\t\t\t\t\t\t\t\ttitle: \"Landscape\"\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t{\tkey: \"portrait\", \n\t\t\t\t\t\t\t\t\ttitle: \"Portrait\"\n\t\t\t\t\t\t\t\t}\n];\n\n\nexport const localStorageKey = \"imgData\";","import { formats } from './../components/Config';\nimport \"lodash\";\n\nexport const formatByRatio = (ratio) => {\n\t\n\tfor( let key in formats ){\n\t\tif( formats[key].ratio.from <= ratio && ratio <= formats[key].ratio.to ){\n\t\t\treturn formats[key].key;\n\t\t}\n\t}\n}\n\nexport const saveAs = (uri, filename) => {\n\n    var link = document.createElement('a');\n\n    if (typeof link.download === 'string') {\n\n        link.href = uri;\n        link.download = filename;\n\n        //Firefox requires the link to be in the body\n        document.body.appendChild(link);\n\n        //simulate click\n        link.click();\n\n        //remove the link when done\n        document.body.removeChild(link);\n\n    } else {\n\n        window.open(uri);\n\n\t}\n}","import React, { useState,useEffect } from \"react\";\nimport _ from 'lodash';\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\nimport { formats, rules, centers, orientations } from './../components/Config';\nimport { saveAs } from './../components/Helpers';\n\n\n\nfunction Orientation(props){\n\n\tconst [items, \t\t\tsetItems] \t\t\t\t= useState([]);\n\n\tuseEffect(() => {\n\t\tconst itemList = (\n\t\t\t<React.Fragment>\n\t\t\t\t{centers.map( (center,idx) => {\n\t\t\t\t\tlet itemClass = ( center.key === props.current ) ? 'active' : '';\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span key={idx} className={`orientation__${center.key} ${itemClass}`}>{center.title}</span>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</React.Fragment>\n\t\t);\n\t\tsetItems(itemList);\n\t}, [props]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{items}\n\t\t</React.Fragment>\n\t)\n}\n\n\n\nfunction Header(props){\n\n\tconst [rule, \t\t\tsetRule] \t\t\t\t= useState('');\n\tconst [format, \t\t\tsetFormat] \t\t\t\t= useState('');\n\tconst [orientation, \tsetOrientation] \t\t= useState('');\n\tconst [centering, \t\tsetCenter] \t\t\t\t= useState('');\n\tconst [loading, \t\tsetLoading] \t\t\t= useState(false);\n\n\t// get format and rule from state/config\n\tuseEffect(() => {\n\t\tif( props.state.format && props.state.rule ){\n\t\t\tsetRule(rules[ _.findKey(rules, {key: props.state.rule } )]['title'] );\n\t\t\tsetFormat(formats[ _.findKey(formats, {key: props.state.format } )]['title'] );\n\t\t}\n\t\tif( props.state.center ){\n\t\t\tsetCenter(centers[ _.findKey(centers, {key: props.state.center } )] );\n\t\t}\n\t\tif( props.imageData && props.imageData.orientation ){\n\t\t\tsetOrientation(orientations[ _.findKey(orientations, {key: props.imageData.orientation } )]['title'] );\n\t\t}\n\t}, [props]);\n\n\t// upload new file in LS\n\tconst doUpload = (e) =>{\n\n\t\tsetLoading(true);\n\n\t\tconst data = new FormData() \n\t\tdata.append('file', e.target.files[0]);\n\t\taxios.post(\"imgTo64.php\", data, {})\n\t\t.then(res => {\n\t\t\tprops.setImage(res.data);\n\t\t\tsetLoading(false);\n\t\t})\n\t}\n\n\t// reset file in LS\n\tconst doReset = () => {\n\t\tprops.setImage(null)\n\t}\n\n\t// save file\n\tconst doSave = (params) => {\n\t\thtml2canvas(\n\t\t\tdocument.querySelector(\".drag\"),{\n\t\t\t\tignoreElements: function(el) {  \n\t\t\t\t\treturn (params.rules) \n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: el.classList.contains('rule') \n\t\t\t\t},\n\t\t\t\tscale: 1\n\t\t\t}\n\t\t).then(canvas => {\n\t\t\tlet now = new Date();\n\t\t\tvar date = now.getDate();\n\t\t\tvar month = now.getMonth();\n\t\t\tvar year = now.getFullYear();\n\t\t\tlet filename = `composition_${props.state.rule}_${props.state.format}_${date}${month}${year}.png`;\n\t\t\tsaveAs(canvas.toDataURL(), filename);\n\t\t});\n\t}\n\n\t// recenter\n\tconst doCentering = () => {\n\t\tprops.setCenter();\n\t}\n\n\treturn (\n\n\t\t<header className=\"header clearfix\">\n\t\t\t\n\t\t\t<div className=\"left\">\n\n\t\t\t\t{ props.imageData &&\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{ format }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{rule}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{<label>\n\t\t\t\t\t\t\t<button className=\"btn orientations\" onClick={(e) => doCentering()}>\n\t\t\t\t\t\t\t\t<Orientation current={centering.key} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</label>}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t<div className=\"right\">\n\n\t\t\t\t<strong>\n\t\t\t\t{ !props.imageData && \n\t\t\t\t\t<div className={`upload-btn-wrapper`} data-loading={loading}>\n\t\t\t\t\t\t<button className=\"btn btn--accent\">+</button>\n\t\t\t\t\t\t<input type=\"file\" name=\"file\" accept=\"image/*\" onChange={(e) => doUpload(e)} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t{ props.imageData && \n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{/* \n\t\t\t\t\t\t<button className=\"btn\" onClick={(e) => doSave({rules: true})}>get rules</button>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t*/}\n\t\t\t\t\t\t<button className=\"btn btn--ui\" onClick={(e) => doSave({rules: false})}>Download</button>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<button className=\"btn btn--accent\" onClick={(e) => doReset()}>New</button> \n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t\t</strong>\n\t\t\t</div>\n\n\t\t</header>\n\n\t);\n}\n\nexport default Header;\n","import React from \"react\";\n\nfunction Footer(){\n\n\treturn (\n\n\t\t<footer className=\"footer clearfix\">\n\t\t\t\n\t\t\t<div className=\"left\">\n\t\t\t\tComposition @ 2020.\n\t\t\t</div> \n\t\t\t<div className=\"right\">\n\t\t\t\tMade with love.\n\t\t\t</div>\n\n\t\t</footer>\n\n\t);\n}\n\nexport default Footer;\n","import React,{useState, useEffect} from \"react\";\nimport _ from 'lodash';\nimport { rules } from './../components/Config';\n\n//import './../rules/thirds.svg';\n\nfunction Rule(props){\n\n\tconst [rule, \tsetRule] \t= useState('');\n\n\t// get rule from state/config\n\tuseEffect(() => {\n\t\tif( props.rule ){\n\t\t\tlet ruleObj = rules[ _.findKey(rules, {key: props.rule } )];\n\t\t\tsetRule(\n\t\t\t\t`rules/${ruleObj.key}_${props.format}.svg`\n\t\t\t);\n\t\t}\n\t}, [props]);\n\n\treturn (\n\n\t\t<div className=\"rule\">\n\n\t\t\t{ rule && \n\t\t\t\t<img alt=\"rule\" src={rule} /> \n\t\t\t}\n\t\t\t\n\t\t</div>\n\n\t);\n}\n\nexport default Rule;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport {Swipe} from \"react-swipe-component\"\nimport Rule from './../components/Rule';\nimport { stateInitial,rules,formats } from './../components/Config';\nimport _ from 'lodash';\n\nlet swipeDeltaX = 0;\nlet swipeDeltaY = 0;\n\nconst Drag = (props) => {\n\n\tconst refDrag = useRef(null);\n\n\tconst [swipeState, \t\tsetSwipeState] \t\t= useState(stateInitial);\n\n\t// update state from props \n\tuseEffect(() => {\n\t\tif( props.state ){\n\t\t\tsetSwipeState(props.state);\n\t\t}\n\t}, [props.state]);\n\t\n\t// swiper methods\n\tconst onSwipe = (e) => {\n\t\tswipeDeltaX = e.x;\n\t\tswipeDeltaY = e.y;\n\t\ttransformOnDrag(swipeDeltaX,swipeDeltaY);\n\t}\n\tconst onSwipeEnd = (e) => {\n\t\t// get current keys\n\t\tlet state = {...swipeState};\n\t\tlet currentRule = parseInt( _.findKey(rules, {key: state.rule} ) );\n\t\tlet currentFormat = parseInt( _.findKey(formats, {key: state.format} ) );\n\t\t// get swipe direction\n\t\tlet direction = \"\";\n\t\tif( Math.abs(swipeDeltaX) > Math.abs(swipeDeltaY) ){\n\t\t\tdirection = ( swipeDeltaX > 0 ) ? \"right\" : \"left\";\n\t\t}else{\n\t\t\tdirection = ( swipeDeltaY > 0 ) ? \"bottom\" : \"top\";\n\t\t}\n\n\t\t// update keys\n\t\tswitch( direction ){\n\t\t\t// rule prev\n\t\t\tcase \"right\":\n\t\t\t\tstate.rule = (currentRule > 0) ? rules[currentRule-1].key : rules[rules.length-1].key;\n\t\t\t\tbreak;\n\t\t\t// rule next\n\t\t\tcase \"left\":\n\t\t\t\tstate.rule = (rules.length-1 > currentRule) ? rules[currentRule+1].key : rules[0].key;\n\t\t\t\tbreak;\n\t\t\t// format prev\n\t\t\tcase \"top\":\n\t\t\t\tstate.format = (currentFormat > 0) ? formats[currentFormat-1].key : formats[formats.length-1].key;\n\t\t\t\tbreak;\n\t\t\t// format next\n\t\t\tcase \"bottom\":\n\t\t\t\tstate.format = (formats.length-1 > currentFormat) ? formats[currentFormat+1].key : formats[0].key;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//\n\t\t}\n\t\t// set swipe direction\n\t\tsetSwipeState(state)\n\t\t// set external props\n\t\tprops.onSwipe({state:state, direction: direction});\n\t\t// reset transformation\n\t\ttransformOnDrag(0,0);\n\t}\n\n\t// on swipe : transformations\n\tconst transformOnDrag = (x,y) => {\n\t\tx = x*.2;\n\t\ty = y*.1;\n\t\trefDrag.current.style.transform = ( Math.abs(x) > Math.abs(y) ) \n\t\t\t? `translate(${x}px,0px)` \n\t\t\t: `translate(0px,${y}px)` \n\t\t;\n\t}\n\n\treturn (\n\n\t\t<React.Fragment>\n\t\t\t\n\t\t\t<div className=\"drag-container\" data-orientation={props.imageData.orientation} ref={refDrag}>\n\t\t\t\t<Swipe\n\t\t\t\t\tnodeName=\"figure\"\n\t\t\t\t\tclassName={`drag drag--rule-${swipeState.rule} drag--format-${swipeState.format} drag--center-${swipeState.center}`}\n\t\t\t\t\tstyle={{backgroundImage: `url(${props.imageData.base64})`}}\n\t\t\t\t\tonSwipe={ (e)=>{ onSwipe(e) } }\n\t\t\t\t\tonSwipeEnd={ (e) => { onSwipeEnd(e) } }\n\t\t\t\t\tdetectMouse={true}\n\t\t\t\t\tdetectTouch={true} \n\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\tstopPropagation={true}>\t\n\t\t\t\t\t<Rule \trule={swipeState.rule} \n\t\t\t\t\t\t\tformat={swipeState.format}\n\t\t\t\t\t\t\torientation={props.imageData.orientation} />\n\n\t\t\t\t</Swipe>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t</React.Fragment>\n\n\t);\n}\n\nexport default Drag;\n","import React, { useState,useEffect } from \"react\";\n\nimport Header from \t\t'./../components/Header';\nimport Footer from \t\t'./../components/Footer';\nimport Drag from \t\t'./../components/Drag';\n\nimport { rules, centers, stateInitial, localStorageKey } from './../components/Config';\nimport { formatByRatio } from './../components/Helpers';\nimport _ from \"lodash\";\n\nfunction Main(){\n\n\tconst [swipeState, \t\tsetSwipeState] \t\t= useState({state:stateInitial});\n\tconst [headerState, \tsetHeaderState] \t= useState(true);\n\tconst [footerState, \tsetFooterState] \t= useState(true);\n\tconst [imageData, \t\tsetImageData] \t\t= useState(null);\n\n\t// check local storage for image\n\tuseEffect(() => {\n\t\tlet lsData = localStorage.getItem(localStorageKey);\n\t\tif( lsData ){\n\t\t\tlet imgData = JSON.parse( lsData );\n\t\t\t// get img format from ratio\n\t\t\tlet imgFormat = formatByRatio(imgData.ratio);\n\t\t\t// set ratio\n\t\t\tsetSwipeState({state: {\tformat: \t\timgFormat,\n\t\t\t\t\t\t\t\t\torientation: \timgData['orientation'],\n\t\t\t\t\t\t\t\t\trule: \t\t\tstateInitial['rule'],\n\t\t\t\t\t\t\t\t\tcenter: \t\tstateInitial['center']\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\tsetImageData( imgData );\n\t\t}\n\n\t}, []);\n\n\t// on drag event\n\tuseEffect(() => {\n\t\tswitch ( swipeState.direction ) {\n\t\t\t// initial state from Drag component\n\t\t\tcase 'init':\n\t\t\t\tsetHeaderState( true );\n\t\t\t\tsetFooterState( true );\n\t\t\t\tbreak;\n\t\t\tdefault: \n\t\t\t\tsetHeaderState( true );\n\t\t\t\tsetFooterState( true );\n\t\t}\n\t}, [swipeState]);\n\n\t// update swipe state\n\tconst onSwipe = (state) => {\n\t\tsetSwipeState(state);\n\t}\n\n\t// set new image or reset existing one\n\tconst setImage = (imgData) => {\n\t\tif( imgData !== null ){\n\t\t\t// update format\n\t\t\tlet imgFormat = formatByRatio( imgData.ratio );\n\t\t\tsetSwipeState({state: {\tformat: imgFormat, \n\t\t\t\t\t\t\t\t\trule: \tswipeState.state.rule,\n\t\t\t\t\t\t\t\t\tcenter: swipeState.state.center,\n\t\t\t\t\t\t\t\t\torientation: \tswipeState.state.orientation }\n\t\t\t\t\t\t});\n\t\t\t// save LS\n\t\t\tlocalStorage.setItem(localStorageKey, JSON.stringify( imgData ) );\n\t\t}else{\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t}\n\t\tsetImageData( imgData );\n\t}\n\n\t// centering the image\n\tconst setCenter = () => {\n\t\tlet state = {...swipeState.state};\n\t\tlet currentCenter = parseInt( _.findKey(centers, {key: state.center }) );\n\t\tlet nextCenter = ( centers.length -1 > currentCenter ) ? centers[currentCenter+1] : centers[0];\n\t\tstate.center = nextCenter.key;\n\t\tsetSwipeState({\tstate: state});\n\t}\n\n\treturn (\n\n\t\t<div className=\"main\">\n\t\t\t\n\t\t\t{ headerState && \n\t\t\t\t<Header \tstate={swipeState.state} \n\t\t\t\t\t\t\timageData={imageData}\n\t\t\t\t\t\t\tsetImage={setImage}\n\t\t\t\t\t\t\tsetCenter={setCenter} /> \n\t\t\t}\n\n\t\t\t{ imageData && \n\t\t\t\t<Drag \t\tstate={swipeState.state}\n\t\t\t\t\t\t\timageData={imageData}\n\t\t\t\t\t\t\tonSwipe={onSwipe} /> \n\t\t\t}\n\n\t\t\t{ imageData === null && \n\t\t\t\t<div className=\"hello\">\n\t\t\t\t\t<h1>Applied <label>Composition</label></h1>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUse the top <label>+</label> button to load an image or to take a picture.\n\t\t\t\t\t\tSwiping <label>up/down</label> changes the crop of the picture.\n\t\t\t\t\t\tSwiping <label>left/right</label> changes the grid rule applied to the image.\n\t\t\t\t\t\tClicking on the <label>centering icon</label> changes the center of the image focus.\n\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\tAs usual, do not forget to <label>have fun</label> while using this tool.\n\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t<small className=\"gray\">* Images are not uploaded to a server, they are stored on your device.</small>\n\t\t\t\t\t</p>\n\t\t\t\t\t<img className=\"hello__img\" src={`dragme_ui/rules/homepage.svg`} alt=\"\" />\n\t\t\t\t</div> \n\t\t\t}\n\t\t\t\n\t\t\t{ footerState && <Footer /> }\n\n\t\t</div>\n\n\t);\n}\n\nexport default Main;\n","import React from 'react';\nimport Main from './components/Main';\n\nimport './styles/index.scss';\n\nfunction App() {\n  return (\n\n    <div className=\"App\">\n      <Main />\n    </div>\n\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}